"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _defineProperty(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function _objectWithoutProperties(t,e){var o={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i]);return o}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},_react=require("react"),_react2=_interopRequireDefault(_react),_Portal=require("../hoc/Portal"),_Portal2=_interopRequireDefault(_Portal),_classnames2=require("classnames"),_classnames3=_interopRequireDefault(_classnames2),_reactCssThemr=require("react-css-themr"),_identifiers=require("../identifiers.js"),_events=require("../utils/events"),_events2=_interopRequireDefault(_events),_utils=require("../utils/utils"),_utils2=_interopRequireDefault(_utils),POSITION={BOTTOM:"bottom",HORIZONTAL:"horizontal",LEFT:"left",RIGHT:"right",TOP:"top",VERTICAL:"vertical"},defaults={className:"",delay:0,hideOnClick:!0,showOnClick:!1,position:POSITION.VERTICAL,theme:{}},tooltipFactory=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=_extends({},defaults,t),o=e.className,i=e.delay,r=e.hideOnClick,n=e.showOnClick,s=e.position,a=e.theme;return function(t){var e=function(e){function o(){var t,e,i,r;_classCallCheck(this,o);for(var n=arguments.length,s=Array(n),a=0;a<n;a++)s[a]=arguments[a];return e=i=_possibleConstructorReturn(this,(t=o.__proto__||Object.getPrototypeOf(o)).call.apply(t,[this].concat(s))),i.state={active:!1,position:i.props.tooltipPosition,visible:!1},i.onTransformEnd=function(t){"transform"===t.propertyName&&(_events2.default.removeEventListenerOnTransitionEnded(i.refs.tooltip,i.onTransformEnd),i.setState({visible:!1}))},i.handleMouseEnter=function(t){i.activate(i.calculatePosition(t.currentTarget)),i.props.onMouseEnter&&i.props.onMouseEnter(t)},i.handleMouseLeave=function(t){i.deactivate(),i.props.onMouseLeave&&i.props.onMouseLeave(t)},i.handleClick=function(t){i.props.tooltipHideOnClick&&i.state.active&&i.deactivate(),i.props.tooltipShowOnClick&&!i.state.active&&i.activate(i.calculatePosition(t.currentTarget)),i.props.onClick&&i.props.onClick(t)},r=e,_possibleConstructorReturn(i,r)}return _inherits(o,e),_createClass(o,[{key:"componentWillUnmount",value:function(){this.refs.tooltip&&_events2.default.removeEventListenerOnTransitionEnded(this.refs.tooltip,this.onTransformEnd)}},{key:"activate",value:function(t){var e=this,o=t.top,i=t.left,r=t.position;this.timeout&&clearTimeout(this.timeout),this.setState({visible:!0,position:r}),this.timeout=setTimeout(function(){e.setState({active:!0,top:o,left:i})},this.props.tooltipDelay)}},{key:"deactivate",value:function(){this.timeout&&clearTimeout(this.timeout),this.state.active?(_events2.default.addEventListenerOnTransitionEnded(this.refs.tooltip,this.onTransformEnd),this.setState({active:!1})):this.state.visible&&this.setState({visible:!1})}},{key:"getPosition",value:function(t){var e=this.props.tooltipPosition;if(e===POSITION.HORIZONTAL){var o=t.getBoundingClientRect(),i=_utils2.default.getViewport(),r=i.width,n=o.left<r/2-o.width/2;return n?POSITION.RIGHT:POSITION.LEFT}if(e===POSITION.VERTICAL){var s=t.getBoundingClientRect(),a=_utils2.default.getViewport(),l=a.height,p=s.top<l/2-s.height/2;return p?POSITION.BOTTOM:POSITION.TOP}return e}},{key:"calculatePosition",value:function(t){var e=this.getPosition(t),o=t.getBoundingClientRect(),i=o.top,r=o.left,n=o.height,s=o.width,a=window.scrollX||window.pageXOffset,l=window.scrollY||window.pageYOffset;return e===POSITION.BOTTOM?{top:i+n+l,left:r+s/2+a,position:e}:e===POSITION.TOP?{top:i+l,left:r+s/2+a,position:e}:e===POSITION.LEFT?{top:i+n/2+l,left:r+a,position:e}:e===POSITION.RIGHT?{top:i+n/2+l,left:r+s+a,position:e}:void 0}},{key:"render",value:function(){var e,o=this.state,i=o.active,r=o.left,n=o.top,s=o.position,a=o.visible,l="tooltip"+(s.charAt(0).toUpperCase()+s.slice(1)),p=this.props,c=p.children,u=p.className,f=p.theme,h=p.tooltip,_=(p.tooltipDelay,p.tooltipHideOnClick,p.tooltipPosition,p.tooltipShowOnClick,_objectWithoutProperties(p,["children","className","theme","tooltip","tooltipDelay","tooltipHideOnClick","tooltipPosition","tooltipShowOnClick"])),d=(0,_classnames3.default)(f.tooltip,(e={},_defineProperty(e,f.tooltipActive,i),_defineProperty(e,f[l],f[l]),e)),O="string"==typeof t;return _react2.default.createElement(t,_extends({},_,{className:u,onClick:this.handleClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},O?{}:{theme:f}),c?c:null,a&&_react2.default.createElement(_Portal2.default,null,_react2.default.createElement("span",{ref:"tooltip",className:d,"data-react-toolbox":"tooltip",style:{top:n,left:r}},_react2.default.createElement("span",{className:f.tooltipInner},h))))}}]),o}(_react.Component);return e.propTypes={children:_react.PropTypes.any,className:_react.PropTypes.string,onClick:_react.PropTypes.func,onMouseEnter:_react.PropTypes.func,onMouseLeave:_react.PropTypes.func,theme:_react.PropTypes.shape({tooltip:_react.PropTypes.string,tooltipActive:_react.PropTypes.string,tooltipWrapper:_react.PropTypes.string}),tooltip:_react.PropTypes.oneOfType([_react.PropTypes.string,_react.PropTypes.node]),tooltipDelay:_react.PropTypes.number,tooltipHideOnClick:_react.PropTypes.bool,tooltipPosition:_react.PropTypes.oneOf(Object.keys(POSITION).map(function(t){return POSITION[t]})),tooltipShowOnClick:_react.PropTypes.bool},e.defaultProps={className:o,tooltipDelay:i,tooltipHideOnClick:r,tooltipPosition:s,tooltipShowOnClick:n},(0,_reactCssThemr.themr)(_identifiers.TOOLTIP,a)(e)}};exports.default=tooltipFactory;
//# sourceMappingURL=Tooltip.min.js.map